const _0x1fc75c=_0xc2e7;(function(_0x23a9dc,_0x8c0406){const _0x2e03de=_0xc2e7,_0x570464=_0x23a9dc();while(!![]){try{const _0x4f496b=-parseInt(_0x2e03de(0x206))/0x1*(parseInt(_0x2e03de(0x1d5))/0x2)+-parseInt(_0x2e03de(0x20c))/0x3*(parseInt(_0x2e03de(0x1f5))/0x4)+parseInt(_0x2e03de(0x1b9))/0x5*(-parseInt(_0x2e03de(0x1bb))/0x6)+parseInt(_0x2e03de(0x1d7))/0x7+parseInt(_0x2e03de(0x1c1))/0x8*(-parseInt(_0x2e03de(0x212))/0x9)+parseInt(_0x2e03de(0x1cb))/0xa*(parseInt(_0x2e03de(0x204))/0xb)+parseInt(_0x2e03de(0x213))/0xc;if(_0x4f496b===_0x8c0406)break;else _0x570464['push'](_0x570464['shift']());}catch(_0x46cb24){_0x570464['push'](_0x570464['shift']());}}}(_0x44af,0x6d903));function _0xc2e7(_0x897f58,_0x10fa11){_0x897f58=_0x897f58-0x1b9;const _0x44affa=_0x44af();let _0xc2e772=_0x44affa[_0x897f58];return _0xc2e772;}import _0x5d08b4 from'fs';import _0xada918 from'path';import _0x3a5a4d from'axios';import{startTopupPoller,makeQrisWatermarkFromString,loadUsers,saveUsers}from'../../lib/topup.js';const ROOT=process['cwd'](),TOPUP_DIR=_0xada918[_0x1fc75c(0x1ef)](ROOT,_0x1fc75c(0x1f2),_0x1fc75c(0x203)),DEP_DIR=_0xada918['join'](TOPUP_DIR,_0x1fc75c(0x1be)),TRX_DIR=_0xada918[_0x1fc75c(0x1ef)](TOPUP_DIR,_0x1fc75c(0x1e6));function ensure(_0x45193d){const _0x447f50=_0x1fc75c;try{_0x5d08b4[_0x447f50(0x1d6)](_0x45193d,{'recursive':!![]});}catch{}}ensure(TOPUP_DIR),ensure(DEP_DIR),ensure(TRX_DIR);function isOwner(_0x2bb61e){const _0x30ca75=_0x1fc75c,_0x5890e5=_0x2bb61e[_0x30ca75(0x1f6)]('@')[0x0];return Array['isArray'](global[_0x30ca75(0x1c2)])?global[_0x30ca75(0x1c2)][_0x30ca75(0x1fe)](_0x5890e5):global[_0x30ca75(0x1c2)]===_0x5890e5;}async function getProductByCode(_0x3f4ac8){const _0x17ba1d=_0x1fc75c,_0x19bd44=new URLSearchParams();_0x19bd44[_0x17ba1d(0x215)](_0x17ba1d(0x1c6),global['atlanticKey']),_0x19bd44[_0x17ba1d(0x215)]('type',_0x17ba1d(0x211));const _0x1bd255=await fetch(_0x17ba1d(0x20d),{'method':_0x17ba1d(0x1f4),'body':_0x19bd44})[_0x17ba1d(0x1eb)](_0x13c904=>_0x13c904['json']());if(!_0x1bd255?.[_0x17ba1d(0x1c8)])return null;return _0x1bd255[_0x17ba1d(0x202)]['find'](_0x45f4ea=>String(_0x45f4ea[_0x17ba1d(0x1d9)])===String(_0x3f4ac8))||null;}let handler=async(_0x54632f,{fenrys:_0x2819d9,text:_0xa7551b})=>{const _0x48ee2f=_0x1fc75c;startTopupPoller(_0x2819d9);const _0x257b78=_0x54632f[_0x48ee2f(0x1e5)][_0x48ee2f(0x1f6)]('@')[0x0],_0x2a0dbb=(_0x54632f[_0x48ee2f(0x21a)]||'')['split'](/\s+/)[0x0]['toLowerCase'](),_0x4321c9=_0xada918[_0x48ee2f(0x1ef)](TRX_DIR,_0x257b78+_0x48ee2f(0x216));if(_0x2a0dbb==='topup'){if(!_0xa7551b)return _0x54632f[_0x48ee2f(0x1c3)]('‚ùå\x20Format:\x20topup\x20<CODE>|qris\x20/\x20|saldo');if(_0x5d08b4['existsSync'](_0x4321c9))return _0x54632f[_0x48ee2f(0x1c3)](_0x48ee2f(0x21b));const [_0x2f3315,_0x391c35]=_0xa7551b[_0x48ee2f(0x1f6)]('|'),_0x150452=String(_0x2f3315||'')[_0x48ee2f(0x1f9)](),_0x1fe296=(_0x391c35||'qris')['trim']()[_0x48ee2f(0x1ea)]();if(!_0x150452)return _0x54632f[_0x48ee2f(0x1c3)](_0x48ee2f(0x1ec));const _0x3ec007=await getProductByCode(_0x150452);if(!_0x3ec007)return _0x54632f[_0x48ee2f(0x1c3)](_0x48ee2f(0x1fc));const _0x490e2b=Number(_0x3ec007[_0x48ee2f(0x1c4)]||0x0),_0x3b52f5=Number(global['untungTopup']||0x0),_0x43bf36=isOwner(_0x54632f[_0x48ee2f(0x1e5)])?_0x490e2b:Math['round'](_0x490e2b+_0x490e2b*_0x3b52f5/0x64),_0x1f839c='TP'+Date[_0x48ee2f(0x1de)]()+Math[_0x48ee2f(0x1fb)](Math['random']()*0x270f);if(_0x1fe296===_0x48ee2f(0x1e2)){const _0x644ac9=loadUsers();if(!_0x644ac9[_0x48ee2f(0x1db)][_0x257b78])_0x644ac9[_0x48ee2f(0x1db)][_0x257b78]={'id':_0x54632f[_0x48ee2f(0x1e5)],'saldoTopup':0x0};if(_0x644ac9[_0x48ee2f(0x1db)][_0x257b78][_0x48ee2f(0x1bc)]<_0x43bf36)return _0x54632f['reply']('‚ùå\x20Saldo\x20tidak\x20cukup.');const _0x5c52ec=await _0x2819d9['sendMessage'](_0x54632f[_0x48ee2f(0x1d1)],{'text':_0x48ee2f(0x200)+('üì¶\x20'+_0x3ec007['name']+'\x0a')+(_0x48ee2f(0x21d)+_0x43bf36[_0x48ee2f(0x1f8)](_0x48ee2f(0x1bf))+'\x0a\x0a')+_0x48ee2f(0x1f1)+buildTargetHint(_0x150452)},{'quoted':_0x54632f});_0x5d08b4['writeFileSync'](_0x4321c9,JSON[_0x48ee2f(0x205)]({'uid':_0x257b78,'sender':_0x54632f[_0x48ee2f(0x1e5)],'token':_0x1f839c,'productId':_0x150452,'productName':_0x3ec007[_0x48ee2f(0x1ca)],'price':_0x43bf36,'payment':_0x48ee2f(0x1e2),'status':_0x48ee2f(0x1cf),'waiting_reply':_0x5c52ec['key']['id'],'created_at':Date[_0x48ee2f(0x1de)]()},null,0x2));return;}function _0x52347a(_0x2a13ce){const _0x4bb77e=Math['ceil'](_0x2a13ce*0.018),_0x2fbca2=0xc8;return _0x2a13ce+_0x4bb77e+_0x2fbca2;}const _0x5475df=_0x52347a(_0x43bf36),_0x23e18b=await _0x3a5a4d[_0x48ee2f(0x1da)]('https://atlantich2h.com/deposit/create',new URLSearchParams({'api_key':global[_0x48ee2f(0x21c)],'reff_id':String(Date[_0x48ee2f(0x1de)]()),'nominal':String(_0x5475df),'type':_0x48ee2f(0x20f),'metode':_0x48ee2f(0x1c5)}),{'headers':{'Content-Type':_0x48ee2f(0x1f3)}});if(!_0x23e18b?.[_0x48ee2f(0x202)]?.['status'])return _0x54632f[_0x48ee2f(0x1c3)](_0x48ee2f(0x1f0));const _0x39d691=_0x23e18b[_0x48ee2f(0x202)]['data'],_0x4c4662=await makeQrisWatermarkFromString(_0x39d691['qr_string']),_0x19893d=await _0x2819d9[_0x48ee2f(0x1ff)](_0x54632f[_0x48ee2f(0x1d1)],{'image':_0x5d08b4[_0x48ee2f(0x1f7)](_0x4c4662),'text':_0x48ee2f(0x219)+('üì¶\x20'+_0x3ec007['name']+'\x0a')+(_0x48ee2f(0x21d)+_0x43bf36[_0x48ee2f(0x1f8)](_0x48ee2f(0x1bf))+'\x0a')+('‚è≥\x20Expired:\x20'+_0x39d691[_0x48ee2f(0x207)]+'\x0a\x0a')+_0x48ee2f(0x218),'footer':global[_0x48ee2f(0x1fd)],'buttons':[{'buttonId':'cancelqris','buttonText':{'displayText':'‚ùå\x20Cancel\x20QRIS'},'type':0x1}]},{'quoted':_0x54632f});_0x5d08b4[_0x48ee2f(0x1e0)](_0x4c4662),_0x5d08b4[_0x48ee2f(0x1e7)](_0x4321c9,JSON[_0x48ee2f(0x205)]({'uid':_0x257b78,'sender':_0x54632f[_0x48ee2f(0x1e5)],'token':_0x1f839c,'productId':_0x150452,'productName':_0x3ec007[_0x48ee2f(0x1ca)],'price':_0x43bf36,'payment':_0x48ee2f(0x201),'deposit_id':_0x39d691['id'],'status':'waiting_pay','msg_data':{'remoteJid':_0x19893d[_0x48ee2f(0x1d8)]['remoteJid'],'msg_id':_0x19893d[_0x48ee2f(0x1d8)]['id'],'participant':_0x19893d[_0x48ee2f(0x1d8)]['participant']||null},'created_at':Date['now']()},null,0x2));return;}if(_0x2a0dbb===_0x48ee2f(0x1c7)){if(!_0x5d08b4[_0x48ee2f(0x217)](_0x4321c9))return _0x54632f[_0x48ee2f(0x1c3)](_0x48ee2f(0x1cd));const _0x20b55b=JSON[_0x48ee2f(0x214)](_0x5d08b4[_0x48ee2f(0x1f7)](_0x4321c9));if(_0x20b55b[_0x48ee2f(0x1d0)]!=='qris'||_0x20b55b[_0x48ee2f(0x1c8)]!==_0x48ee2f(0x1df))return _0x54632f['reply'](_0x48ee2f(0x1ee));try{await _0x3a5a4d[_0x48ee2f(0x1da)]('https://atlantich2h.com/deposit/cancel',new URLSearchParams({'api_key':global[_0x48ee2f(0x21c)],'id':_0x20b55b['deposit_id']}),{'headers':{'Content-Type':_0x48ee2f(0x1f3)}});}catch{}if(_0x20b55b[_0x48ee2f(0x1dc)])try{await _0x2819d9[_0x48ee2f(0x21e)](_0x20b55b[_0x48ee2f(0x1dc)][_0x48ee2f(0x1e4)],{'delete':{'remoteJid':_0x20b55b['msg_data'][_0x48ee2f(0x1e4)],'fromMe':!![],'id':_0x20b55b[_0x48ee2f(0x1dc)]['msg_id'],'participant':_0x20b55b[_0x48ee2f(0x1dc)][_0x48ee2f(0x1d3)]||undefined}});}catch{}return _0x5d08b4['unlinkSync'](_0x4321c9),_0x54632f['reply'](_0x48ee2f(0x1cc));}if(_0x54632f[_0x48ee2f(0x1ed)]?.[_0x48ee2f(0x1ba)]?.['contextInfo']?.['quotedMessage']&&_0x54632f['message'][_0x48ee2f(0x1ba)][_0x48ee2f(0x210)][_0x48ee2f(0x20a)]){if(!_0x5d08b4['existsSync'](_0x4321c9))return;const _0xc4f9a2=JSON[_0x48ee2f(0x214)](_0x5d08b4[_0x48ee2f(0x1f7)](_0x4321c9));if(_0xc4f9a2[_0x48ee2f(0x1c8)]!==_0x48ee2f(0x1cf))return;if(_0xc4f9a2['waiting_reply']!==_0x54632f['message']['extendedTextMessage'][_0x48ee2f(0x210)]['stanzaId'])return;const _0x2fe182=_0x54632f[_0x48ee2f(0x21a)][_0x48ee2f(0x1f9)](),_0x1e3a82=normalizeTarget(_0xc4f9a2[_0x48ee2f(0x1d2)],_0x2fe182);if(!_0x1e3a82['ok'])return _0x54632f['reply'](_0x1e3a82[_0x48ee2f(0x209)]);return _0xc4f9a2[_0x48ee2f(0x208)]=_0x1e3a82[_0x48ee2f(0x208)],_0xc4f9a2[_0x48ee2f(0x1bd)]=_0x2fe182,_0xc4f9a2[_0x48ee2f(0x1c8)]=_0x48ee2f(0x20b),delete _0xc4f9a2[_0x48ee2f(0x1e1)],_0x5d08b4[_0x48ee2f(0x1e7)](_0x4321c9,JSON[_0x48ee2f(0x205)](_0xc4f9a2,null,0x2)),_0x2819d9[_0x48ee2f(0x1ff)](_0x54632f[_0x48ee2f(0x1d1)],{'text':_0x48ee2f(0x1e3)+('üì¶\x20'+_0xc4f9a2['productName']+'\x0a')+(_0x48ee2f(0x21d)+_0xc4f9a2[_0x48ee2f(0x1c4)]['toLocaleString']('id-ID')+'\x0a')+(_0x48ee2f(0x1c0)+_0x2fe182),'footer':global[_0x48ee2f(0x1fd)],'buttons':[{'buttonId':'confirmtopup','buttonText':{'displayText':'‚úÖ\x20Konfirmasi'},'type':0x1},{'buttonId':_0x48ee2f(0x1ce),'buttonText':{'displayText':_0x48ee2f(0x1d4)},'type':0x1}]},{'quoted':_0x54632f});}if(_0x2a0dbb===_0x48ee2f(0x1ce)){if(!_0x5d08b4['existsSync'](_0x4321c9))return;const _0x21e331=JSON[_0x48ee2f(0x214)](_0x5d08b4[_0x48ee2f(0x1f7)](_0x4321c9));_0x21e331[_0x48ee2f(0x1c8)]=_0x48ee2f(0x1cf),delete _0x21e331[_0x48ee2f(0x208)],delete _0x21e331['target_raw'];const _0x1689ff=await _0x2819d9[_0x48ee2f(0x21e)](_0x54632f[_0x48ee2f(0x1d1)],{'text':_0x48ee2f(0x1c9)+buildTargetHint(_0x21e331[_0x48ee2f(0x1d2)])},{'quoted':_0x54632f});_0x21e331[_0x48ee2f(0x1e1)]=_0x1689ff[_0x48ee2f(0x1d8)]['id'],_0x5d08b4[_0x48ee2f(0x1e7)](_0x4321c9,JSON['stringify'](_0x21e331,null,0x2));return;}if(_0x2a0dbb==='confirmtopup'){if(!_0x5d08b4['existsSync'](_0x4321c9))return;const _0x33b00b=JSON[_0x48ee2f(0x214)](_0x5d08b4['readFileSync'](_0x4321c9));if(_0x33b00b[_0x48ee2f(0x1c8)]!==_0x48ee2f(0x20b))return;if(_0x33b00b[_0x48ee2f(0x1d0)]==='saldo'){const _0x48502e=loadUsers();if(_0x48502e[_0x48ee2f(0x1db)][_0x257b78][_0x48ee2f(0x1bc)]<_0x33b00b[_0x48ee2f(0x1c4)])return _0x54632f[_0x48ee2f(0x1c3)](_0x48ee2f(0x1fa));_0x48502e[_0x48ee2f(0x1db)][_0x257b78]['saldoTopup']-=_0x33b00b[_0x48ee2f(0x1c4)],saveUsers(_0x48502e);}return _0x33b00b[_0x48ee2f(0x1c8)]='processing',_0x5d08b4[_0x48ee2f(0x1e7)](_0x4321c9,JSON[_0x48ee2f(0x205)](_0x33b00b,null,0x2)),_0x54632f[_0x48ee2f(0x1c3)]('‚è±Ô∏è\x20Diproses...');}};function buildTargetHint(_0xf59d01){const _0x17788c=_0x1fc75c;if(String(_0xf59d01)[_0x17788c(0x1e8)]('ML'))return'Format:\x20123456#1234';return'Masukkan\x20ID\x20/\x20target\x20sesuai\x20produk';}function _0x44af(){const _0x2c71d9=['message','‚ùå\x20QRIS\x20sudah\x20dibayar\x20/\x20tidak\x20bisa\x20dibatalkan.','join','‚ùå\x20Gagal\x20buat\x20QRIS.','üìå\x20*BALAS\x20PESAN\x20INI*\x20dengan\x20target\x20topup\x0a\x0a','database','application/x-www-form-urlencoded','POST','52AQHRrz','split','readFileSync','toLocaleString','trim','‚ùå\x20Saldo\x20tidak\x20cukup.','floor','‚ùå\x20Produk\x20tidak\x20ditemukan.','footer','includes','sendButtonMsg','‚úÖ\x20*Pembayaran\x20via\x20SALDO*\x0a\x0a','qris','data','topup','1089BiGKwG','stringify','123973lbXzDJ','expired_at','target','msg','stanzaId','need_confirm','164499RroRfQ','https://atlantich2h.com/layanan/price_list','tags','ewallet','contextInfo','prabayar','9GjoYbp','12462348DJcKPW','parse','append','.json','existsSync','Scan\x20QRIS\x20untuk\x20bayar','üßæ\x20*TOPUP\x20QRIS*\x0a\x0a','text','‚ö†Ô∏è\x20Masih\x20ada\x20transaksi\x20topup\x20aktif.','atlanticKey','üí∞\x20Rp\x20','sendMessage','160aFRHkE','extendedTextMessage','16914MWgCaA','saldoTopup','target_raw','deposit','id-ID','üéØ\x20','2616728vSCSxu','ownerNumber','reply','price','qrisfast','api_key','cancelqris','status','üîÅ\x20*Masukkan\x20target\x20baru*\x0a\x0a','name','44510uaZuTh','‚ùå\x20QRIS\x20dibatalkan.','‚ùå\x20Tidak\x20ada\x20transaksi.','canceltopup','need_target','payment','chat','productId','participant','üîÑ\x20Ubah\x20Target','10lCpAdJ','mkdirSync','5037102PZijGP','key','code','post','users','msg_data','Format\x20ML\x20salah','now','waiting_pay','unlinkSync','waiting_reply','saldo','üìå\x20*KONFIRMASI\x20TOPUP*\x0a\x0a','remoteJid','sender','transaction','writeFileSync','startsWith','command','toLowerCase','then','‚ùå\x20Kode\x20produk\x20kosong.'];_0x44af=function(){return _0x2c71d9;};return _0x44af();}function normalizeTarget(_0x2c0c88,_0x3741cf){const _0x14dfd4=_0x1fc75c;if(String(_0x2c0c88)[_0x14dfd4(0x1e8)]('ML')){const [_0x4b026a,_0x1f8d80]=_0x3741cf[_0x14dfd4(0x1f6)]('#');if(!_0x4b026a||!_0x1f8d80)return{'ok':![],'msg':_0x14dfd4(0x1dd)};return{'ok':!![],'target':_0x4b026a+'|'+_0x1f8d80};}return{'ok':!![],'target':_0x3741cf[_0x14dfd4(0x1f9)]()};}handler[_0x1fc75c(0x1e9)]=/^(topup|cancelqris|canceltopup|confirmtopup)$/i,handler[_0x1fc75c(0x20e)]=['topup'];export default handler;