const _0x582360=_0x541f;(function(_0x25e889,_0x859db7){const _0x2c2b63=_0x541f,_0x9f5ee1=_0x25e889();while(!![]){try{const _0x21f52c=parseInt(_0x2c2b63(0xa6))/0x1*(parseInt(_0x2c2b63(0x89))/0x2)+-parseInt(_0x2c2b63(0xb6))/0x3*(parseInt(_0x2c2b63(0xa7))/0x4)+parseInt(_0x2c2b63(0xc4))/0x5*(parseInt(_0x2c2b63(0xbe))/0x6)+-parseInt(_0x2c2b63(0xd1))/0x7+parseInt(_0x2c2b63(0xb0))/0x8+-parseInt(_0x2c2b63(0x72))/0x9+parseInt(_0x2c2b63(0xd8))/0xa*(parseInt(_0x2c2b63(0x8f))/0xb);if(_0x21f52c===_0x859db7)break;else _0x9f5ee1['push'](_0x9f5ee1['shift']());}catch(_0x5e5327){_0x9f5ee1['push'](_0x9f5ee1['shift']());}}}(_0x301a,0x74ddf));import _0x4f0946 from'fs';import _0x25e704 from'path';import _0x17c4c8 from'axios';import _0x4ea9f6 from'chalk';import{createCanvas,loadImage}from'canvas';const TAG=_0x4ea9f6[_0x582360(0xce)](_0x582360(0x9b)),log=(..._0x2fe6ee)=>console['log'](TAG,..._0x2fe6ee),ROOT=process[_0x582360(0xb4)](),TOPUP_DIR=_0x25e704[_0x582360(0xa8)](ROOT,'database',_0x582360(0xcf)),DEP_DIR=_0x25e704[_0x582360(0xa8)](TOPUP_DIR,'deposit'),TRX_DIR=_0x25e704[_0x582360(0xa8)](TOPUP_DIR,'transaction'),USER_DB=_0x25e704['join'](ROOT,_0x582360(0x81),_0x582360(0x8a)),HIS_DB=_0x25e704[_0x582360(0xa8)](ROOT,'database',_0x582360(0xc5)),TMP_DIR=_0x25e704[_0x582360(0xa8)](ROOT,_0x582360(0xb8)),LOGO=_0x25e704['join'](ROOT,_0x582360(0x78));function _0x541f(_0x1e40a1,_0x50b00b){_0x1e40a1=_0x1e40a1-0x72;const _0x301ad7=_0x301a();let _0x541f37=_0x301ad7[_0x1e40a1];return _0x541f37;}function ensure(_0xf43090){const _0x3951ac=_0x582360;try{_0x4f0946[_0x3951ac(0x98)](_0xf43090,{'recursive':!![]});}catch{}}ensure(TOPUP_DIR),ensure(DEP_DIR),ensure(TRX_DIR),ensure(TMP_DIR);export function loadUsers(){const _0x4869a6=_0x582360;if(!_0x4f0946[_0x4869a6(0xb7)](USER_DB))_0x4f0946[_0x4869a6(0x9a)](USER_DB,JSON[_0x4869a6(0x90)]({'users':{}},null,0x2));return JSON[_0x4869a6(0xbc)](_0x4f0946[_0x4869a6(0x73)](USER_DB,'utf8'));}export function saveUsers(_0x562558){const _0x423d8e=_0x582360;_0x4f0946[_0x423d8e(0x9a)](USER_DB,JSON['stringify'](_0x562558,null,0x2));}function loadHistory(){const _0x584484=_0x582360;if(!_0x4f0946[_0x584484(0xb7)](HIS_DB))_0x4f0946[_0x584484(0x9a)](HIS_DB,'[]');try{return JSON['parse'](_0x4f0946[_0x584484(0x73)](HIS_DB,'utf8'));}catch{return[];}}function pushHistory(_0x2907d1){const _0x587be7=_0x582360,_0x300a51=loadHistory();_0x300a51[_0x587be7(0xa3)](_0x2907d1),_0x4f0946[_0x587be7(0x9a)](HIS_DB,JSON[_0x587be7(0x90)](_0x300a51,null,0x2));}export async function makeQrisWatermarkFromString(_0x49709f){const _0x3fd2c3=_0x582360,_0x5a75c4=_0x3fd2c3(0x82)+encodeURIComponent(_0x49709f),_0x673ecf=await loadImage(_0x5a75c4);let _0x5d0a2e=null;try{_0x5d0a2e=await loadImage(LOGO);}catch(_0x1e323e){}const _0x3a9a15=Math[_0x3fd2c3(0xb9)](_0x673ecf['width'],_0x673ecf[_0x3fd2c3(0x80)]),_0x38421e=createCanvas(_0x3a9a15,_0x3a9a15),_0x4e32f0=_0x38421e[_0x3fd2c3(0x83)]('2d');_0x4e32f0[_0x3fd2c3(0x75)](_0x673ecf,0x0,0x0,_0x3a9a15,_0x3a9a15);_0x5d0a2e&&_0x4e32f0['drawImage'](_0x5d0a2e,0x0,0x0,_0x3a9a15,_0x3a9a15);const _0x45b3b1=_0x25e704[_0x3fd2c3(0xa8)](TMP_DIR,'qris_topup_'+Date[_0x3fd2c3(0x86)]()+_0x3fd2c3(0x9e));return _0x4f0946[_0x3fd2c3(0x9a)](_0x45b3b1,_0x38421e[_0x3fd2c3(0x7c)](_0x3fd2c3(0x96))),_0x45b3b1;}async function deleteMsg(_0x31db86,_0x5ab3d2){const _0x2a45a2=_0x582360;if(!_0x5ab3d2?.[_0x2a45a2(0x8e)]||!_0x5ab3d2?.[_0x2a45a2(0xac)])return;try{await _0x31db86[_0x2a45a2(0x8d)](_0x5ab3d2[_0x2a45a2(0x8e)],{'delete':{'remoteJid':_0x5ab3d2[_0x2a45a2(0x8e)],'fromMe':!![],'id':_0x5ab3d2[_0x2a45a2(0xac)],'participant':_0x5ab3d2['participant']||undefined}});}catch{}}function _0x301a(){const _0x208bbb=['1225015UDZYeI','stringify','ðŸ”„\x20nokos.js\x20updated','deposit_id','ðŸ’°\x20Harga:\x20Rp\x20','post','toLowerCase','image/png','success','mkdirSync','redBright','writeFileSync','[TOPUP-POLLER]','filter','failed','.png','toLocaleString','unwatchFile','qris','status','push','sender','processing','2LemlGY','3178228FOjwIA','join','https://atlantich2h.com/transaksi/create','saldoTopup','msg_data','msg_id','toUpperCase','productName','amount','2406392sHzuZg','âœ…\x20*Deposit\x20TOPUP\x20Berhasil*\x0aSaldo\x20TOPUP\x20+Rp\x20','cancel','watchFile','cwd','https://atlantich2h.com/transaksi/status','3gxPZIH','existsSync','tmp','min','ðŸ“¦\x20Produk:\x20','order_id','parse','need_target','6KtKBBQ','atlanticKey','uid','data','?update=','utf8','4078775DSHCbt','topup.json','payment','ðŸŽ¯\x20Target:\x20','application/x-www-form-urlencoded','unlinkSync','ðŸ§¾\x20SN:\x0a','TRX\x20STATUS','waiting_pay','poller\x20started','yellow','topup','Kirim\x20target\x20dengan\x20reply\x20pesan\x20ini\x0a\x0a','3713752MMnkYG','number','fail_msg','message','polling','price','readdirSync','60sFKexJ','reff_id','.json','endsWith','target_raw','7331436Gefmhx','readFileSync','https://atlantich2h.com/deposit/status','drawImage','pathname','startsWith','logo.png','create\x20failed','target','DEPO','toBuffer','id-ID','DEPO\x20API\x20ERR','â±ï¸\x20Transaksi\x20diproses...','height','database','https://api.qrserver.com/v1/create-qr-code/?size=500x500&data=','getContext','âŒ\x20Transaksi\x20QRIS\x20','TRX\x20PAY\x20ERR','now','âŒ\x20Deposit\x20TOPUP\x20','expired','833640XAjaEg','user.json','POLL\x20TRX\x20ERR','productId','sendMessage','remoteJid'];_0x301a=function(){return _0x208bbb;};return _0x301a();}let running=![];export function startTopupPoller(_0x4082bc,_0x44908a=0x1388){const _0x1e9a08=_0x582360;if(running)return;running=!![],log(_0x1e9a08(0xcd)),setInterval(async()=>{const _0x36a0e0=_0x1e9a08;for(const _0x11458b of _0x4f0946['readdirSync'](DEP_DIR)[_0x36a0e0(0x9c)](_0x41ec5b=>_0x41ec5b[_0x36a0e0(0xdb)](_0x36a0e0(0xda)))){const _0x3d9fa7=_0x25e704[_0x36a0e0(0xa8)](DEP_DIR,_0x11458b);let _0x2412c0;try{_0x2412c0=JSON[_0x36a0e0(0xbc)](_0x4f0946['readFileSync'](_0x3d9fa7,_0x36a0e0(0xc3)));}catch{continue;}try{const _0x29ef6b=await _0x17c4c8[_0x36a0e0(0x94)](_0x36a0e0(0x74),new URLSearchParams({'api_key':global[_0x36a0e0(0xbf)],'id':_0x2412c0[_0x36a0e0(0x92)]}),{'headers':{'Content-Type':_0x36a0e0(0xc8)}}),_0x26b93e=_0x29ef6b?.[_0x36a0e0(0xc1)]?.[_0x36a0e0(0xc1)]?.[_0x36a0e0(0xa2)];log(_0x36a0e0(0x7b),_0x2412c0[_0x36a0e0(0x92)],_0x26b93e);if(_0x26b93e===_0x36a0e0(0x97)){await deleteMsg(_0x4082bc,_0x2412c0[_0x36a0e0(0xab)]);const _0x56e549=loadUsers();if(!_0x56e549['users'][_0x2412c0[_0x36a0e0(0xc0)]])_0x56e549['users'][_0x2412c0[_0x36a0e0(0xc0)]]={'id':_0x2412c0[_0x36a0e0(0xa4)],'saldoNokos':0x0,'saldoTopup':0x0};if(typeof _0x56e549['users'][_0x2412c0[_0x36a0e0(0xc0)]][_0x36a0e0(0xaa)]!==_0x36a0e0(0xd2))_0x56e549['users'][_0x2412c0[_0x36a0e0(0xc0)]][_0x36a0e0(0xaa)]=0x0;_0x56e549['users'][_0x2412c0['uid']][_0x36a0e0(0xaa)]+=Number(_0x2412c0[_0x36a0e0(0xaf)]||0x0),saveUsers(_0x56e549),await _0x4082bc[_0x36a0e0(0x8d)](_0x2412c0[_0x36a0e0(0xa4)],{'text':_0x36a0e0(0xb1)+Number(_0x2412c0[_0x36a0e0(0xaf)]||0x0)[_0x36a0e0(0x9f)]('id-ID')}),pushHistory({..._0x2412c0,'final_status':_0x36a0e0(0x97),'finished_at':Date[_0x36a0e0(0x86)]()}),_0x4f0946[_0x36a0e0(0xc9)](_0x3d9fa7);}(_0x26b93e==='cancel'||_0x26b93e===_0x36a0e0(0x88))&&(await deleteMsg(_0x4082bc,_0x2412c0['msg_data']),await _0x4082bc[_0x36a0e0(0x8d)](_0x2412c0[_0x36a0e0(0xa4)],{'text':_0x36a0e0(0x87)+_0x26b93e+'.'}),pushHistory({..._0x2412c0,'final_status':_0x26b93e,'finished_at':Date[_0x36a0e0(0x86)]()}),_0x4f0946[_0x36a0e0(0xc9)](_0x3d9fa7));}catch(_0x27594b){log(_0x36a0e0(0x7e),_0x27594b?.[_0x36a0e0(0xd4)]);}}for(const _0x2eb923 of _0x4f0946[_0x36a0e0(0xd7)](TRX_DIR)[_0x36a0e0(0x9c)](_0x11de97=>_0x11de97[_0x36a0e0(0xdb)](_0x36a0e0(0xda)))){const _0x3f2130=_0x25e704['join'](TRX_DIR,_0x2eb923);let _0x2bf015;try{_0x2bf015=JSON['parse'](_0x4f0946[_0x36a0e0(0x73)](_0x3f2130,'utf8'));}catch{continue;}if(_0x2bf015[_0x36a0e0(0xc6)]===_0x36a0e0(0xa1)&&_0x2bf015[_0x36a0e0(0xa2)]===_0x36a0e0(0xcc)){try{const _0x4a228c=await _0x17c4c8['post'](_0x36a0e0(0x74),new URLSearchParams({'api_key':global[_0x36a0e0(0xbf)],'id':_0x2bf015[_0x36a0e0(0x92)]}),{'headers':{'Content-Type':'application/x-www-form-urlencoded'}}),_0x350c38=_0x4a228c?.['data']?.[_0x36a0e0(0xc1)]?.[_0x36a0e0(0xa2)];log('TRX\x20PAY',_0x2bf015[_0x36a0e0(0x92)],_0x350c38),_0x350c38===_0x36a0e0(0x97)&&(await deleteMsg(_0x4082bc,_0x2bf015[_0x36a0e0(0xab)]),_0x2bf015[_0x36a0e0(0xa2)]=_0x36a0e0(0xbd),_0x4f0946[_0x36a0e0(0x9a)](_0x3f2130,JSON[_0x36a0e0(0x90)](_0x2bf015,null,0x2)),await _0x4082bc[_0x36a0e0(0x8d)](_0x2bf015['sender'],{'text':'âœ…\x20*Pembayaran\x20diterima*\x0a\x0a'+(_0x36a0e0(0xba)+_0x2bf015[_0x36a0e0(0xae)]+'\x0a')+(_0x36a0e0(0x93)+Number(_0x2bf015[_0x36a0e0(0xd6)]||0x0)['toLocaleString'](_0x36a0e0(0x7d))+'\x0a\x0a')+_0x36a0e0(0xd0)+buildTargetHint(_0x2bf015['productId'])})),(_0x350c38===_0x36a0e0(0xb2)||_0x350c38===_0x36a0e0(0x88))&&(await deleteMsg(_0x4082bc,_0x2bf015[_0x36a0e0(0xab)]),await _0x4082bc['sendMessage'](_0x2bf015['sender'],{'text':_0x36a0e0(0x84)+_0x350c38+'.'}),pushHistory({..._0x2bf015,'final_status':_0x350c38,'finished_at':Date[_0x36a0e0(0x86)]()}),_0x4f0946[_0x36a0e0(0xc9)](_0x3f2130));}catch(_0x642569){log(_0x36a0e0(0x85),_0x642569?.[_0x36a0e0(0xd4)]);}continue;}if(_0x2bf015[_0x36a0e0(0xa2)]===_0x36a0e0(0xa5)&&!_0x2bf015[_0x36a0e0(0xbb)]){try{const _0x3aac43=await _0x17c4c8[_0x36a0e0(0x94)](_0x36a0e0(0xa9),new URLSearchParams({'api_key':global[_0x36a0e0(0xbf)],'reff_id':String(Date[_0x36a0e0(0x86)]()),'code':_0x2bf015[_0x36a0e0(0x8c)],'target':_0x2bf015[_0x36a0e0(0x7a)]}),{'headers':{'Content-Type':_0x36a0e0(0xc8)}});if(!_0x3aac43?.[_0x36a0e0(0xc1)]?.[_0x36a0e0(0xa2)]){_0x2bf015['status']=_0x36a0e0(0x9d),_0x2bf015[_0x36a0e0(0xd3)]=_0x3aac43?.[_0x36a0e0(0xc1)]?.['message']||_0x36a0e0(0x79),_0x4f0946[_0x36a0e0(0x9a)](_0x3f2130,JSON[_0x36a0e0(0x90)](_0x2bf015,null,0x2));continue;}_0x2bf015[_0x36a0e0(0xbb)]=_0x3aac43?.[_0x36a0e0(0xc1)]?.[_0x36a0e0(0xc1)]?.['id']||_0x3aac43?.[_0x36a0e0(0xc1)]?.['data']?.[_0x36a0e0(0xd9)]||null,_0x2bf015[_0x36a0e0(0xa2)]='polling',_0x4f0946['writeFileSync'](_0x3f2130,JSON['stringify'](_0x2bf015,null,0x2)),await _0x4082bc[_0x36a0e0(0x8d)](_0x2bf015['sender'],{'text':_0x36a0e0(0x7f)});}catch(_0xff8769){log('CREATE\x20TRX\x20ERR',_0xff8769?.['message']);}continue;}if(_0x2bf015[_0x36a0e0(0xa2)]===_0x36a0e0(0xd5)&&_0x2bf015[_0x36a0e0(0xbb)])try{const _0x433a95=await _0x17c4c8[_0x36a0e0(0x94)](_0x36a0e0(0xb5),new URLSearchParams({'api_key':global[_0x36a0e0(0xbf)],'type':'prabayar','id':_0x2bf015[_0x36a0e0(0xbb)]}),{'headers':{'Content-Type':_0x36a0e0(0xc8)}});if(!_0x433a95?.[_0x36a0e0(0xc1)]?.['status'])continue;const _0x248ad5=String(_0x433a95?.['data']?.[_0x36a0e0(0xc1)]?.[_0x36a0e0(0xa2)]||'')[_0x36a0e0(0x95)]();log(_0x36a0e0(0xcb),_0x2bf015[_0x36a0e0(0xbb)],_0x248ad5),_0x248ad5==='success'&&(await _0x4082bc[_0x36a0e0(0x8d)](_0x2bf015[_0x36a0e0(0xa4)],{'text':'âœ…\x20*TOPUP\x20SUKSES*\x0a\x0a'+(_0x36a0e0(0xba)+_0x2bf015[_0x36a0e0(0xae)]+'\x0a')+(_0x36a0e0(0xc7)+(_0x2bf015[_0x36a0e0(0xdc)]||_0x2bf015[_0x36a0e0(0x7a)])+'\x0a')+('ðŸ’°\x20Harga:\x20Rp\x20'+Number(_0x2bf015[_0x36a0e0(0xd6)]||0x0)[_0x36a0e0(0x9f)](_0x36a0e0(0x7d))+'\x0a')+(_0x36a0e0(0xca)+(_0x433a95?.[_0x36a0e0(0xc1)]?.[_0x36a0e0(0xc1)]?.['sn']||'-'))}),pushHistory({..._0x2bf015,'final_status':_0x36a0e0(0x97),'sn':_0x433a95?.[_0x36a0e0(0xc1)]?.[_0x36a0e0(0xc1)]?.['sn']||null,'finished_at':Date[_0x36a0e0(0x86)]()}),_0x4f0946[_0x36a0e0(0xc9)](_0x3f2130)),(_0x248ad5===_0x36a0e0(0x9d)||_0x248ad5===_0x36a0e0(0xb2))&&(await _0x4082bc[_0x36a0e0(0x8d)](_0x2bf015[_0x36a0e0(0xa4)],{'text':'âŒ\x20TOPUP\x20'+_0x248ad5[_0x36a0e0(0xad)]()}),pushHistory({..._0x2bf015,'final_status':_0x248ad5,'finished_at':Date[_0x36a0e0(0x86)]()}),_0x4f0946[_0x36a0e0(0xc9)](_0x3f2130));}catch(_0x31f74b){log(_0x36a0e0(0x8b),_0x31f74b?.['message']);}}},_0x44908a);}function buildTargetHint(_0x1adbe8){const _0x4794e6=_0x582360;if(String(_0x1adbe8||'')[_0x4794e6(0x77)]('ML'))return'ðŸ“Œ\x20*Mobile\x20Legends*\x0aFormat:\x20123456#1234';return'ðŸ“Œ\x20*Target*\x0aMasukkan\x20ID/nomor\x20tujuan\x20sesuai\x20produk.';}const file=new URL(import.meta.url)[_0x582360(0x76)];_0x4f0946[_0x582360(0xb3)](file,()=>{const _0x29fae4=_0x582360;_0x4f0946[_0x29fae4(0xa0)](file),console['log'](_0x4ea9f6[_0x29fae4(0x99)](_0x29fae4(0x91))),import(import.meta.url+_0x29fae4(0xc2)+Date[_0x29fae4(0x86)]());});